# VM run log â€” 2025-12-26T00:17:04Z (UTC)

## Command
- `pytest tests/vm/test_pre_nixos_vm.py tests/vm/test_pre_nixos_cleanup.py -q`

## Result
- **Failure**: `test_pre_nixos_cleans_raid_lvm_residue` completed but `md127`/`vg_residue/lv_residue` remained after restarting `pre-nixos.service` and waiting for it to go inactive. The combined lsblk output still contained the residue and the sentinel block content.
- Infrastructure fixes validated: distinct SSH ports and per-fixture disk images avoided the previous hostfwd/lock errors; both VMs booted and the cleanup scenario ran to completion before asserting on residue.

## Artifacts
- Single-disk VM logs: `notes/2025-12-26T000748Z-vm-run/logs/` (boot_to_login ~164s; boot_to_ssh ~259s; total ~491s; build reused, ~438s).
- Cleanup VM logs: `notes/2025-12-26T001220Z-vm-run/logs/` (boot_to_login ~167s; no SSH timing recorded because the run failed after pre-nixos; total ~206s; build reused, ~438s).
- Ledger entries appended to `notes/vm-run-ledger.jsonl`.

## Next steps
- Inspect the cleanup metadata/logs to determine why `pre-nixos` left the seeded mdadm/LVM residue intact; adjust cleanup handling to tear down `/dev/md127` and `vg_residue/lv_residue` on boot.
