# RAID/LVM residue investigation â€” 2025-12-24T04:15:41Z (UTC)

## Observations
- Reviewed `notes/2025-12-24T003039Z-vm-run/` harness and serial logs to understand the missing sentinel content in the RAID/LVM cleanup scenario.
- Found the mdadm create command used an invalid `--raid1` flag, which caused the array creation to fail. Subsequent `pvcreate`/`vgcreate`/`lvcreate` commands cascaded failures because `/dev/md127` never existed.
- The write to `/dev/vg_residue/lv_residue` failed with `No such file or directory`, so later reads understandably returned empty output.

## Actions
- Corrected the residue plan to use a valid `mdadm --create` invocation and added an immediate `mdadm --detail /dev/md127` step to surface creation failures early.
- Added a small unit test to pin the expected command shape and guard against reintroducing the invalid flag.

## Next steps
- Re-run the VM cleanup scenario to confirm the corrected plan writes the sentinel and that pre-nixos cleanup removes the RAID/LVM artifacts.
- Keep capturing logs/ledger entries for each attempt.
