# VM integration attempt â€” 2025-12-23T00:46:30Z (UTC)

## Context
- Follow-up on the modular VM test plan: run the full VM integration suite (`test_pre_nixos_vm.py` and `test_pre_nixos_cleanup.py`) and capture timings/artifacts.

## Actions
- Installed missing dev dependency to unblock imports: `pip install -r requirements-dev.txt`.
- Ran `pytest tests/vm/test_pre_nixos_vm.py tests/vm/test_pre_nixos_cleanup.py -q` with default timeouts (spawn 900s, login 300s).
- Copied the harness/serial logs and diagnostic artifacts from `/tmp/pytest-of-root/pytest-0/boot-image-logs0/` into `notes/2025-12-23T004412Z-vm-run/` for permanence.

## Results
- All four VM scenarios failed during login: `BootImageVM` could not retain root privileges after `sudo -i` or `su -` despite seeing a root prompt; subsequent `id -u` calls returned non-root values (`20` after `sudo`, `200` after `su`).
- Timings from metadata: boot-image build ~507s (squashfs-heavy), total harness runtime ~111s; pytest reported overall wall-clock ~619s for the suite.
- Diagnostics collected (see directory below) include harness log, serial log, login transcript, and sudo/su escalation transcripts plus serial tails. Ledger entry recorded in `notes/vm-run-ledger.jsonl` at `2025-12-23T00:46:03Z` with outcome `error`.

## Artifacts
- Logs/diagnostics: `notes/2025-12-23T004412Z-vm-run/`
- Run ledger entry: `notes/vm-run-ledger.jsonl` (latest appended)
